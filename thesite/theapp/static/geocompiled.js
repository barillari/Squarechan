(function(){if(!(window.google&&google.gears)){var a=null;if(typeof GearsFactory!="undefined")a=new GearsFactory;else try{a=new ActiveXObject("Gears.Factory");a.getBuildInfo().indexOf("ie_mobile")!=-1&&a.privateSetGlobalObject(this)}catch(d){if(typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-googlegears"]){a=document.createElement("object");a.style.display="none";a.width=0;a.height=0;a.type="application/x-googlegears";document.documentElement.appendChild(a);if(a&&typeof a.create==
"undefined")a=null}}if(a){window.google||(google={});if(!google.gears)google.gears={factory:a}}}})();var bb_successCallback,bb_errorCallback,bb_blackberryTimeout_id=-1;function handleBlackBerryLocationTimeout(){bb_blackberryTimeout_id!=-1&&bb_errorCallback({message:"Timeout error",code:3})}
function handleBlackBerryLocation(){clearTimeout(bb_blackberryTimeout_id);bb_blackberryTimeout_id=-1;if(bb_successCallback&&bb_errorCallback){if(blackberry.location.latitude==0&&blackberry.location.longitude==0)bb_errorCallback({message:"Position unavailable",code:2});else{var a=null;if(blackberry.location.timestamp)a=new Date(blackberry.location.timestamp);bb_successCallback({timestamp:a,coords:{latitude:blackberry.location.latitude,longitude:blackberry.location.longitude}})}bb_errorCallback=bb_successCallback=
null}}
var geo_position_js=function(){var a={},d=null;a.getCurrentPosition=function(g,f,e){d.getCurrentPosition(g,f,e)};a.init=function(){try{if(typeof geo_position_js_simulator!="undefined")d=geo_position_js_simulator;else if(typeof bondi!="undefined"&&typeof bondi.geolocation!="undefined")d=bondi.geolocation;else if(typeof navigator.geolocation!="undefined"){d=navigator.geolocation;a.getCurrentPosition=function(f,e,b){d.getCurrentPosition(function(c){typeof c.latitude!="undefined"?f({timestamp:c.timestamp,coords:{latitude:c.latitude,
longitude:c.longitude}}):f(c)},e,b)}}else if(typeof window.google!="undefined"&&typeof google.gears!="undefined")d=google.gears.factory.create("beta.geolocation");else if(typeof Mojo!="undefined"&&typeof Mojo.Service.Request!="Mojo.Service.Request"){d=true;a.getCurrentPosition=function(f,e,b){parameters={};if(b){if(b.enableHighAccuracy&&b.enableHighAccuracy==true)parameters.accuracy=1;if(b.maximumAge)parameters.maximumAge=b.maximumAge;if(b.responseTime)if(b.responseTime<5)parameters.responseTime=
1;else if(b.responseTime<20)parameters.responseTime=2;else parameters.timeout=3}r=new Mojo.Service.Request("palm://com.palm.location",{method:"getCurrentPosition",parameters:parameters,onSuccess:function(c){f({timestamp:c.timestamp,coords:{latitude:c.latitude,longitude:c.longitude,heading:c.heading}})},onFailure:function(c){if(c.errorCode==1)e({code:3,message:"Timeout"});else c.errorCode==2?e({code:2,message:"Position Unavailable"}):e({code:0,message:"Unknown Error: webOS-code"+errorCode})}})}}else if(typeof device!=
"undefined"&&typeof device.getServiceObject!="undefined"){d=device.getServiceObject("Service.Location","ILocation");a.getCurrentPosition=function(f,e){var b={};b.LocationInformationClass="BasicLocationInformation";d.ILocation.GetLocation(b,function(c,i,h){i==4?e({message:"Position unavailable",code:2}):f({timestamp:null,coords:{latitude:h.ReturnValue.Latitude,longitude:h.ReturnValue.Longitude,altitude:h.ReturnValue.Altitude,heading:h.ReturnValue.Heading}})})}}else if(typeof window.blackberry!="undefined"&&
blackberry.location.GPSSupported){if(typeof blackberry.location.setAidMode=="undefined")return false;blackberry.location.setAidMode(2);a.getCurrentPosition=function(f,e,b){bb_successCallback=f;bb_errorCallback=e;bb_blackberryTimeout_id=b.timeout?setTimeout("handleBlackBerryLocationTimeout()",b.timeout):setTimeout("handleBlackBerryLocationTimeout()",6E4);blackberry.location.onLocationUpdate("handleBlackBerryLocation()");blackberry.location.refreshLocation()};d=blackberry.location}}catch(g){alert("error="+
g);typeof console!="undefined"&&console.log(g);return false}return d!=null};return a}();
